(function(l,e,o,i,g,s,S,c){"use strict";var h=o.findByProps("canUseEmojisEverywhere"),k=[i.instead("canUseEmojisEverywhere",h,()=>!0),i.instead("canUseAnimatedEmojis",h,()=>!0)],{getCustomEmojiById:E}=o.findByStoreName("EmojiStore"),{getGuildId:b}=o.findByStoreName("SelectedGuildStore"),R=/<a?:(\w+):(\d+)>/i;function w(t,a){var N=t.matchAll(/<a?:(\w+):(\d+)>/gi);for(var r of N){var y=E(r[2]);if(y.guildId!=b()||y.animated){var C="webp",n=`https://cdn.discordapp.com/emojis/${r[2]}.${C}?size=${a}&quality=lossless&name=${r[1]}`;y.animated&&(n+="&animated=true");var v=n;e.storage.hyperlink?v=`[\u2800](${n})`:e.storage.old_hyperlink&&(v=`[${r[1]}](${n})`),t=t.replace(r[0],v)}}return{newContent:t.trim()}}function j(t){if(t.content.match(R)&&!(!e.storage.forceMoji&&e.storage.haveNitro)){var{newContent:a}=w(t.content,e.storage.emojiSize);t.content=a,t.invalidEmojis=[]}}var F=o.findByProps("sendMessage","receiveMessage"),f=o.findByProps("uploadLocalFiles"),$=[i.before("sendMessage",F,t=>j(t[1])),...f?[i.before("uploadLocalFiles",f,t=>j(t[0].parsedMessage))]:[]],{FormSection:m,FormRadioRow:z,FormSwitchRow:d}=s.Forms,u={Tiny:16,Small:32,Medium:48,Big:56,Large:64,Huge:96,Jumbo:128},B="https://cdn.discordapp.com/emojis/926602689213767680.webp",_=()=>(S.useProxy(e.storage),React.createElement(g.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(m,{title:"Settings",titleStyleType:"no_border"},React.createElement(d,{label:"Hyperlink emoji",subLabel:"Hyperlinks emoji links hidden with invisible character!",leading:React.createElement(s.Forms.FormIcon,{source:c.getAssetIDByName("ic_link")}),value:e.storage.hyperlink,onValueChange:()=>{e.storage.hyperlink=!e.storage.hyperlink,e.storage.hyperlink&&(e.storage.old_hyperlink=!1)},note:""}),React.createElement(d,{label:"Old Hyperlink emoji bleh gross yucky",subLabel:"Hyperlinks emoji link to be less distractive",leading:React.createElement(s.Forms.FormIcon,{source:c.getAssetIDByName("ic_link")}),value:e.storage.old_hyperlink,onValueChange:()=>{e.storage.old_hyperlink=!e.storage.old_hyperlink,e.storage.old_hyperlink&&(e.storage.hyperlink=!1)},note:""}),React.createElement(d,{label:"Force Freemoji",subLabel:"Explicitly force Freemoji even if you have nitro (useful for testing)",leading:React.createElement(s.Forms.FormIcon,{source:c.getAssetIDByName("img_nitro_emojis")}),value:e.storage.forceMoji,onValueChange:()=>{e.storage.forceMoji=!e.storage.forceMoji},note:""})),React.createElement(m,{title:"Emoji Size"},Object.entries(u).map(([t,a])=>React.createElement(z,{label:t,subLabel:a,selected:e.storage.emojiSize===a,onPress:()=>{e.storage.emojiSize=a}}))),React.createElement(m,{title:"Preview"},React.createElement(g.ReactNative.Image,{source:{uri:`${B}?size=${e.storage.emojiSize}`,width:e.storage.emojiSize,height:e.storage.emojiSize}}))));e.storage.emojiSize??=48,e.storage.hyperlink??=!0,e.storage.old_hyperlink??=!e.storage.hyperlink,e.storage.haveNitro??=o.findByStoreName("UserStore").getCurrentUser()?.premiumType!==null,e.storage.forceMoji??=!1,typeof e.storage.emojiSize=="string"&&(e.storage.emojiSize=parseInt(e.storage.emojiSize));var I=[...k,...$],M=()=>I.forEach(t=>t());return l.onUnload=M,l.settings=_,l})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage,vendetta.ui.assets);
